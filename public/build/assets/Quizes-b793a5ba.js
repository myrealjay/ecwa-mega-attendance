import{W as D,a as C,M as E,T as V,P as q,S as U,D as z}from"./DropDown-015fda78.js";import{T as x,B as L,D as F,_ as W,r,o as m,c as p,a as s,b as l,w as i,d as A,v as B,F as R,e as S,t as d,f}from"./app-3681a1c4.js";import{T as Q}from"./TextAreaField-ca9ada3d.js";const M={components:{WalletCard:D,WalletContainer:C,Modal:E,TextField:x,Button:L,Table:V,Pagination:q,SingleSelect:U,TextAreaField:Q,DropDown:z,DateTimeField:F},created(){this.getCategories(),this.getHistory()},data(){return{form:{title:"",description:"",category_id:"",number_of_questions:"",end_date:""},title:"",wallet:{},openFund:!1,amount:"",errors:{amount:""},tableData:{length:5,wallet_id:"",amount:"",type:""},categories:[],headers:[{name:"Title",width:20},{name:"category",width:20},{name:"Number of questions",width:10},{name:"Created At",width:15},{name:"End Date",width:15},{name:"Description",width:20},{name:"Actions",width:10}],links:[],quizes:[],openWallet:!1,selectedCurrency:"",token:"",walletsErrors:{title:""},convertModalOpen:!1,receiveModalOpen:!1,convertForm:{source_currency:"",destination_currency:"",amount:""},convertErrors:{source_currency:"",destination_currency:"",amount:""}}},methods:{download(){this.showLoader(),this.makeRequest("GET",this.endpoints.downloadTemplate,{},{},!0).then(n=>{const t=URL.createObjectURL(n.data),a=document.createElement("a");a.href=t,a.setAttribute("download","questions.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}).catch(n=>{console.log(n.response)}).finally(()=>{this.hideLoader()})},createWallet(){this.title="",this.openWallet=!0},addWallet(){this.showLoader(),this.makeRequest("POST",this.endpoints.addQuiz,{},this.form).then(n=>{this.openWallet=!1,this.sweetAlert().success("Quiz added successfully"),this.hideLoader(),this.getHistory()}).catch(n=>{n.response.data.data?this.walletsErrors=n.response.data.data:this.sweetAlert().error(n.response.data.message)}).finally(()=>{this.hideLoader()})},getCategories(){this.makeRequest("GET",this.endpoints.fetchCategories).then(n=>{this.categories=n.data.data}).catch(n=>{}).finally(()=>{})},getHistory(n=1){this.showLoader(),this.makeRequest("GET",`${this.endpoints.getQuiz}?page=${n}`).then(t=>{this.quizes=t.data.data.data,this.links=t.data.data.meta}).catch(t=>{}).finally(()=>{this.hideLoader()})}},computed:{wallets(){if(this.$store.state.currentUser)return this.$store.state.currentUser.wallets??[]},countries(){if(this.$store.state.currentUser)return this.$store.state.currentUser.countries??[]},recipients(){if(this.$store.state.currentUser)return this.$store.state.currentUser.recipients??[]}}};const P={class:"button-container"},H=s("option",null,"5",-1),N=s("option",null,"10",-1),O=s("option",null,"20",-1),G=s("option",null,"30",-1),I=s("option",null,"50",-1),j=s("option",null,"100",-1),J=s("option",{value:"1000"},"All",-1),K=[H,N,O,G,I,j,J];function X(n,t,a,Y,e,u){const c=r("Button"),_=r("TextField"),g=r("SingleSelect"),w=r("DateTimeField"),y=r("TextAreaField"),k=r("Modal"),h=r("RouterLink"),b=r("DropDown"),T=r("Table"),v=r("Pagination");return m(),p("div",null,[s("div",P,[l(c,{text:"Add Quiz",color:"primary",icon:"mdi mdi-bank",onButtonClicked:t[0]||(t[0]=o=>u.createWallet())}),l(c,{text:"Download Template",color:"warning",icon:"mdi mdi-cloud",onButtonClicked:t[1]||(t[1]=o=>u.download())})]),l(k,{id:"addWallet",title:"Add Quiz",open:e.openWallet,onClosed:t[7]||(t[7]=o=>e.openWallet=!1)},{buttons:i(()=>[l(c,{icon:"mdi-book",text:"Add Quiz",color:"primary",onButtonClicked:u.addWallet},null,8,["onButtonClicked"])]),default:i(()=>[l(_,{modelValue:e.form.title,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.title=o),label:"Title",error:e.walletsErrors.title?e.walletsErrors.title[0]:""},null,8,["modelValue","error"]),l(g,{options:e.categories,modelValue:e.form.category_id,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.category_id=o),custom_value:"id",text:"name",label:"Category",error:e.walletsErrors.category_id?e.walletsErrors.category_id[0]:""},null,8,["options","modelValue","error"]),l(_,{modelValue:e.form.number_of_questions,"onUpdate:modelValue":t[4]||(t[4]=o=>e.form.number_of_questions=o),label:"Number of questions",error:e.walletsErrors.number_of_questions?e.walletsErrors.number_of_questions[0]:""},null,8,["modelValue","error"]),l(w,{modelValue:e.form.end_date,"onUpdate:modelValue":t[5]||(t[5]=o=>e.form.end_date=o),label:"End Date",error:e.walletsErrors.end_date?e.walletsErrors.end_date[0]:""},null,8,["modelValue","error"]),l(y,{modelValue:e.form.description,"onUpdate:modelValue":t[6]||(t[6]=o=>e.form.description=o),label:"Description",error:e.walletsErrors.description?e.walletsErrors.description[0]:""},null,8,["modelValue","error"])]),_:1},8,["open"]),l(T,{title:"Quizzes",headers:e.headers},{length:i(()=>[A(s("select",{class:"form-control length","onUpdate:modelValue":t[8]||(t[8]=o=>e.tableData.length=o),onChange:t[9]||(t[9]=o=>u.getHistory())},K,544),[[B,e.tableData.length]])]),default:i(()=>[(m(!0),p(R,null,S(e.quizes,o=>(m(),p("tr",{key:o.id},[s("td",null,d(o.title),1),s("td",null,d(o.category?o.category.name:""),1),s("td",null,d(o.number_of_questions),1),s("td",null,d(o.description),1),s("td",null,d(n.formatDate(o.created_at)),1),s("td",null,d(n.formatDate(o.end_date,!0)),1),s("td",null,[l(b,null,{default:i(()=>[l(h,{to:{name:"invitations",params:{quizId:o.id}},class:"dropdown-item"},{default:i(()=>[f("Invite")]),_:2},1032,["to"]),l(h,{to:{name:"responses",params:{quizId:o.id}},class:"dropdown-item"},{default:i(()=>[f("Responses")]),_:2},1032,["to"])]),_:2},1024)])]))),128))]),_:1},8,["headers"]),l(v,{links:e.links.links,from:e.links.from,to:e.links.to,total:e.links.total,onPageClicked:u.getHistory},null,8,["links","from","to","total","onPageClicked"])])}const te=W(M,[["render",X]]);export{te as default};
