import{i as d,_ as f,r as m,o as t,c as i,a as r,t as u,j as _,w as q,f as l,h as n,F as p,e as v,d as y,k,b as T,p as b,l as g}from"./app-3681a1c4.js";const I={mounted(){this.makeRequest("GET",`${this.endpoints.getQuiz}/${this.$route.params.quizId}`).then(s=>{this.quiz=s.data.data}).catch(s=>{}).finally(()=>{this.hideLoader()}),this.makeRequest("GET",`${this.endpoints.startQuiz}/${this.$route.params.quizId}`).then(s=>{this.questions=s.data.data,this.rTime=this.questions.userQuestions?d(parseInt(this.questions.userQuestions.question.duration)*1e3):"",setInterval(()=>{this.rTime&&(this.rTime=d(this.rTime.subtract(1,"seconds")),this.rTime.format("mm:ss")==="00:00"&&this.refresh())},1e3)}).catch(s=>{this.error=s.response.data.message}).finally(()=>{this.hideLoader()})},data(){return{quiz:"",questions:"",rTime:"",form:{option_id:""},error:""}},methods:{refresh(){this.makeRequest("GET",`${this.endpoints.startQuiz}/${this.$route.params.quizId}`).then(s=>{this.questions=s.data.data,this.rTime=this.questions.userQuestions?d(parseInt(this.questions.userQuestions.question.duration)*1e3):""}).catch(s=>{}).finally(()=>{this.hideLoader()})},getTotalDuration(){return this.quizQuestions.userQuiz?d(parseInt(this.quizQuestions.userQuiz.total_duration)*1e3).format("mm:ss"):""},submitAnswer(){if(!this.form.option_id){this.sweetAlert().error("Please select an option");return}this.form.question_id=this.quizQuestions.userQuestions.id,this.showLoader(),this.makeRequest("POST",this.endpoints.respond,{},this.form).then(s=>{this.questions=s.data.data,s.data.data.userQuestions?this.rTime=d(parseInt(this.questions.userQuestions.question.duration)*1e3):this.rTime=""}).catch(s=>{}).finally(()=>{this.hideLoader()})}},computed:{quizQuestions(){return this.questions},remainingTime(){return this.rTime?this.rTime.format("mm:ss"):""},user(){return this.$store.state.currentUser}}};const x=s=>(b("data-v-de95ff32"),s=s(),g(),s),w={key:0},S={class:"error"},L={key:1,class:"main-questions"},B={key:2,class:"submitted"},D=x(()=>r("br",null,null,-1)),N={key:0,class:"btn btn-success"},R={key:1,class:"btn btn-danger"},V={key:3},A={key:0},C={key:1,class:"question quiz"},E=["value"],G={class:"next-button"};function Y(s,a,F,P,o,e){const c=m("page-title"),Q=m("my-button");return t(),i("div",null,[o.error?(t(),i("div",w,[r("h4",S,u(o.error),1)])):(t(),i("div",L,[e.quizQuestions&&!e.quizQuestions.userQuiz.submitted?(t(),_(c,{key:0},{default:q(()=>[l(u(o.quiz?o.quiz.title:"")+" has started",1)]),_:1})):n("",!0),e.quizQuestions&&e.quizQuestions.userQuiz.submitted?(t(),_(c,{key:1},{default:q(()=>[l("You have submittted the quiz : "+u(o.quiz?o.quiz.title:""),1)]),_:1})):n("",!0),e.quizQuestions&&e.quizQuestions.userQuiz.submitted?(t(),i("div",B,[l(" Your score is"),D,l(),e.quizQuestions.userQuiz.score>=50?(t(),i("div",N,u("% "+e.quizQuestions.userQuiz.score),1)):n("",!0),e.quizQuestions.userQuiz.score<50?(t(),i("div",R,u("% "+e.quizQuestions.userQuiz.score),1)):n("",!0),r("div",null,"You got "+u(e.quizQuestions.userQuiz.breakdown)+" Questions correctly.",1)])):n("",!0),e.quizQuestions&&!e.quizQuestions.userQuiz.submitted?(t(),i("div",V,[r("p",null,"Total Duration: "+u(this.getTotalDuration()),1),e.remainingTime?(t(),i("p",A,[r("b",null,u(e.remainingTime),1)])):n("",!0),e.quizQuestions.userQuestions?(t(),i("div",C,[r("p",null,u(e.quizQuestions.userQuestions.question.title),1),(t(!0),i(p,null,v(e.quizQuestions.userQuestions.question.options,h=>(t(),i("div",{key:h.id},[y(r("input",{type:"radio","onUpdate:modelValue":a[0]||(a[0]=z=>o.form.option_id=z),value:h.id},null,8,E),[[k,o.form.option_id]]),r("label",null," Â "+u(h.title),1)]))),128)),r("div",G,[T(Q,{color:"primary",text:"Next",onButtonClicked:a[1]||(a[1]=h=>e.submitAnswer())})])])):n("",!0)])):n("",!0)]))])}const j=f(I,[["render",Y],["__scopeId","data-v-de95ff32"]]);export{j as default};
