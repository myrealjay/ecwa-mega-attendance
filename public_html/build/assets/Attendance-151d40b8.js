import{_ as D,o as l,c as d,a as e,w as k,k as S,t as a,F as c,d as h,l as P,u as N,m as C,n as z,p as m,q as v,s as f,x as B,e as M,b as E,y as w,z as y,A}from"./app-3f79573b.js";const V={data(){return{selectedDate:"",currentPage:1,currentPageAbsent:1,pageSize:10,presentAttendees:[],absentAttendees:[]}},computed:{totalPages(){return Math.ceil(this.presentAttendees.length/this.pageSize)},totalPagesAbsent(){return Math.ceil(this.absentAttendees.length/this.pageSize)},paginatedPresent(){const i=(this.currentPage-1)*this.pageSize;return this.presentAttendees.slice(i,i+this.pageSize)},paginatedAbsent(){const i=(this.currentPageAbsent-1)*this.pageSize;return this.absentAttendees.slice(i,i+this.pageSize)}},methods:{fetchDataByDate(){this.makeRequest("GET",`${this.endpoints.fetchAttendanceByDate}?date=${this.selectedDate}`).then(i=>{this.presentAttendees=i.data.data.present,this.absentAttendees=i.data.data.absent}).catch(i=>{console.log(i.response.data)})},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--},nextPageAbsent(){this.currentPageAbsent<this.totalPagesAbsent&&this.currentPageAbsent++},prevPageAbsent(){this.currentPageAbsent>1&&this.currentPageAbsent--}}},L=e("h2",null,"Attendance by Date",-1),T=e("label",{for:"date-select"},"Select Date:",-1),q={key:0,class:"attendance-list"},U=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Phone Number"),e("th",null,"Email"),e("th",null,"Address")])],-1),F={class:"pagination"},G=["disabled"],I={class:"pages"},R=["disabled"],O={key:1},j=e("p",null,"No present attendees recorded for the selected date.",-1),H=[j],J={key:2,class:"attendance-list"},K=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Phone Number"),e("th",null,"Email"),e("th",null,"Address")])],-1),Q={class:"pagination"},W=["disabled"],X={class:"pages"},Y=["disabled"],Z={key:3},$=e("p",null,"No absent attendees recorded for the selected date.",-1),ee=[$];function te(i,s,_,g,r,n){return l(),d("div",null,[L,e("div",null,[T,k(e("input",{id:"date-select",type:"date","onUpdate:modelValue":s[0]||(s[0]=t=>r.selectedDate=t),class:"date-select",onChange:s[1]||(s[1]=(...t)=>n.fetchDataByDate&&n.fetchDataByDate(...t))},null,544),[[S,r.selectedDate]])]),r.presentAttendees.length>0?(l(),d("div",q,[e("h3",null,"Present Member on "+a(r.selectedDate),1),e("table",null,[U,e("tbody",null,[(l(!0),d(c,null,h(n.paginatedPresent,(t,u)=>(l(),d("tr",{key:u},[e("td",null,a(t.name),1),e("td",null,a(t.phone_number),1),e("td",null,a(t.email),1),e("td",null,a(t.address),1)]))),128))])]),e("div",F,[e("button",{onClick:s[2]||(s[2]=(...t)=>n.prevPage&&n.prevPage(...t)),disabled:r.currentPage===1,class:"previous"}," Previous ",8,G),e("span",I," Page "+a(r.currentPage)+" of "+a(n.totalPages),1),e("button",{onClick:s[3]||(s[3]=(...t)=>n.nextPage&&n.nextPage(...t)),disabled:r.currentPage===n.totalPages,class:"next"}," Next ",8,R)])])):(l(),d("div",O,H)),r.absentAttendees.length>0?(l(),d("div",J,[e("h3",null,"Absent Member on"+a(r.selectedDate),1),e("table",null,[K,e("tbody",null,[(l(!0),d(c,null,h(n.paginatedAbsent,(t,u)=>(l(),d("tr",{key:u},[e("td",null,a(t.name),1),e("td",null,a(t.phone_number),1),e("td",null,a(t.email),1),e("td",null,a(t.address),1)]))),128))])]),e("div",Q,[e("button",{onClick:s[4]||(s[4]=(...t)=>n.prevPageAbsent&&n.prevPageAbsent(...t)),disabled:r.currentPageAbsent===1,class:"previous"}," Previous ",8,W),e("span",X," Page "+a(r.currentPageAbsent)+" of "+a(n.totalPagesAbsent),1),e("button",{onClick:s[5]||(s[5]=(...t)=>n.nextPageAbsent&&n.nextPageAbsent(...t)),disabled:r.currentPageAbsent===n.totalPagesAbsent,class:"next"}," Next ",8,Y)])])):(l(),d("div",Z,ee))])}const se=D(V,[["render",te]]);const ne=e("h2",null,"Attendance List",-1),ae={class:"grid-container"},le=["value"],de={class:"mt-3"},re=["disabled"],ie={key:0},ue=e("h3",null,"Submitted Attendances:",-1),oe={class:"attendance"},he={__name:"Attendance",setup(i){const s=P([]),_=P([]),g=N();C(()=>{g.dispatch("fetchContactData")}),z(()=>{m("GET",v().fetchAttendance).then(u=>{s.value=u.data.data})});const r=f(()=>g.state.contactData),n=f(()=>{let u=[];return r.value.forEach(o=>{u.push({id:o.id,name:o.name})}),u});function t(){let u=[];s.value.forEach(o=>{u.push(o.id)}),w(),m("POST",v().takeAttendance,{},{users:u}).then(o=>{y(),A().success("Attendance successfully submitted")}).catch(o=>{y(),o.response?A().error(o.response.data.message):A().error(o)})}return(u,o)=>(l(),d("div",null,[ne,e("div",ae,[(l(!0),d(c,null,h(n.value,(b,p)=>(l(),d("div",{class:"grid-item",key:p},[e("label",null,[k(e("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=x=>s.value=x),value:b},null,8,le),[[B,s.value]]),e("p",null,a(b.name),1)])]))),128))]),e("div",de,[e("button",{onClick:t,disabled:s.value.length===0,class:"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn"}," Submit Attendance ",8,re)]),_.value.length>0?(l(),d("div",ie,[ue,e("ul",null,[(l(!0),d(c,null,h(_.value,(b,p)=>(l(),d("li",{key:p}))),128))])])):M("",!0),e("div",oe,[E(se)])]))}};export{he as default};
