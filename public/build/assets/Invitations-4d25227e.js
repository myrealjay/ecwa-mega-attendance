import{T as w,P as y,D as b,W as x,a as z,M as B,S as W}from"./DropDown-015fda78.js";import{_ as C,r,o as l,c as a,b as i,w as c,d as A,v as E,a as n,F as q,e as I,t as g,h as v,g as M,T as S,B as L,f as V,j as N}from"./app-3681a1c4.js";const P={components:{Table:w,Pagination:y,DropDown:b},props:["quizId"],mounted(){this.getHistory()},data(){return{headers:[{name:"Quiz",width:20},{name:"Email",width:15},{name:"Completed",width:10},{name:"Actions",width:10}],links:[],tableData:{length:5,wallet_id:"",amount:"",type:""},questions:[]}},methods:{reset(s){confirm(`Are you sure you want reset invite for ${s.email} ?`)&&(this.showLoader(),this.makeRequest("POST",this.endpoints.reset,{},{quiz_id:s.quiz_id,email:s.email}).then(h=>{this.sweetAlert().success(h.data.message),this.hideLoader(),this.getHistory()}).catch(h=>{this.sweetAlert().error("Something went wrong resetting invitation")}).finally(()=>{this.hideLoader()}))},getHistory(s=1){this.showLoader(),this.makeRequest("GET",`${this.endpoints.invite}?quiz_id=${this.quizId}&page=${s}`,this.tableData).then(e=>{this.questions=e.data.data,this.links=e.data,console.log(JSON.parse(JSON.stringify(this.links)))}).catch(e=>{}).finally(()=>{this.hideLoader()})}}},F=n("option",null,"5",-1),H=n("option",null,"10",-1),O=n("option",null,"20",-1),R=n("option",null,"30",-1),U=n("option",null,"50",-1),$=n("option",null,"100",-1),J=n("option",{value:"1000"},"All",-1),j=[F,H,O,R,U,$,J],G={key:0,class:"btn btn-success"},Q={key:1,class:"btn btn-danger"},Y=["onClick"];function K(s,e,h,T,t,d){const _=r("DropDown"),u=r("Table"),p=r("Pagination");return l(),a("div",null,[i(u,{title:"Invitations",headers:t.headers},{length:c(()=>[A(n("select",{class:"form-control length","onUpdate:modelValue":e[0]||(e[0]=o=>t.tableData.length=o),onChange:e[1]||(e[1]=o=>d.getHistory())},j,544),[[E,t.tableData.length]])]),default:c(()=>[(l(!0),a(q,null,I(t.questions,o=>(l(),a("tr",{key:o.id},[n("td",null,g(o.quiz?o.quiz.Title:""),1),n("td",null,g(o.email),1),n("td",null,[o.taken?(l(),a("div",G,"Yes")):v("",!0),o.taken?v("",!0):(l(),a("div",Q,"No"))]),n("td",null,[i(_,null,{default:c(()=>[o.taken?(l(),a("a",{key:0,class:"dropdown-item",href:"",onClick:M(k=>d.reset(o),["prevent"])},"Reset",8,Y)):v("",!0)]),_:2},1024)])]))),128))]),_:1},8,["headers"]),i(p,{links:t.links.links,from:t.links.from,to:t.links.to,total:t.links.total,onPageClicked:d.getHistory},null,8,["links","from","to","total","onPageClicked"])])}const X=C(P,[["render",K]]),Z={components:{WalletCard:x,WalletContainer:z,Modal:B,TextField:S,Button:L,Table:w,Pagination:y,SingleSelect:W,DropDown:b,InvitationTable:X},data(){return{emails:[{email:""}],title:"",wallet:{},openFund:!1,amount:"",errors:{amount:""},tableData:{length:5,wallet_id:"",amount:"",type:""},history:[],headers:[{name:"Name",width:50},{name:"Created At",width:15},{name:"Actions",width:10}],links:[],openWallet:!1,selectedCurrency:"",token:"",walletsErrors:{emails:""},convertModalOpen:!1,receiveModalOpen:!1,convertForm:{source_currency:"",destination_currency:"",amount:""},convertErrors:{source_currency:"",destination_currency:"",amount:""}}},methods:{addMore(){this.emails.push({email:""})},createWallet(){this.title="",this.openWallet=!0},addWallet(){this.showLoader();let s={quiz_id:this.$route.params.quizId,emails:[]};this.emails.forEach(e=>{s.emails.push(e.email)}),this.makeRequest("POST",this.endpoints.invite,{},s).then(e=>{this.openWallet=!1,this.sweetAlert().success("Invitations sent successfully"),this.hideLoader(),this.$refs.invitation.getHistory()}).catch(e=>{console.log(e.response.data),e.response.data.data?this.walletsErrors=e.response.data.data:this.sweetAlert().error(e.response.data.message)}).finally(()=>{this.hideLoader()})}},computed:{}};const ee={class:"button-container"};function te(s,e,h,T,t,d){const _=r("page-title"),u=r("Button"),p=r("InvitationTable"),o=r("TextField"),k=r("Modal");return l(),a("div",null,[i(_,null,{default:c(()=>[V("Invitations")]),_:1}),n("div",ee,[i(u,{text:"Invite",color:"primary",icon:"mdi mdi-bank",onButtonClicked:e[0]||(e[0]=m=>d.createWallet())})]),n("div",null,[i(p,{quizId:this.$route.params.quizId,ref:"invitation"},null,8,["quizId"])]),i(k,{id:"addWallet",title:"Invite",open:t.openWallet,onClosed:e[1]||(e[1]=m=>t.openWallet=!1)},{buttons:c(()=>[i(u,{icon:"mdi-email",text:"Invite",color:"primary",onButtonClicked:d.addWallet},null,8,["onButtonClicked"])]),default:c(()=>[(l(!0),a(q,null,I(t.emails,(m,f)=>(l(),N(o,{key:f,modelValue:m.email,"onUpdate:modelValue":D=>m.email=D,label:"Email",error:t.walletsErrors["emails."+f]?t.walletsErrors["emails."+f][0]:""},null,8,["modelValue","onUpdate:modelValue","error"]))),128)),i(u,{color:"success",text:"Add",onButtonClicked:d.addMore},null,8,["onButtonClicked"])]),_:1},8,["open"])])}const se=C(Z,[["render",te]]);export{se as default};
