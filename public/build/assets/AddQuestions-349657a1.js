import{T as V,P as T,D as v,W as C,a as D,M as B,S as L}from"./DropDown-015fda78.js";import{_ as A,r as u,o as c,c as h,b as n,w as p,d as U,v as x,a,F as b,e as k,t as _,g as W,T as I,B as P,f as S}from"./app-3681a1c4.js";import{T as F}from"./TextAreaField-ca9ada3d.js";const H={components:{Table:V,Pagination:T,DropDown:v},props:["categoryId"],mounted(){this.getHistory()},data(){return{headers:[{name:"Title",width:20},{name:"Duration",width:5},{name:"A",width:10},{name:"B",width:10},{name:"C",width:10},{name:"D",width:10},{name:"Answer",width:10},{name:"Actions",width:10}],links:{},tableData:{length:5,wallet_id:"",amount:"",type:""},questions:[]}},methods:{getHistory(s=1){this.showLoader(),this.makeRequest("GET",`${this.endpoints.getQuestions}/${this.categoryId}?page=${s}`,this.tableData).then(e=>{this.questions=e.data.data.data,this.links=e.data.data.meta}).catch(e=>{}).finally(()=>{this.hideLoader()})},remove(s){confirm("Are you sure you want to delete "+s.title+" ?")&&(this.showLoader(),this.makeRequest("POST",this.endpoints.deleteQuestions,{question_ids:[s.id]}).then(t=>{this.hideLoader(),this.getHistory()}).catch(t=>{}).finally(()=>{this.hideLoader()}))}}},R=a("option",null,"5",-1),M=a("option",null,"10",-1),$=a("option",null,"20",-1),E=a("option",null,"30",-1),O=a("option",null,"50",-1),N=a("option",null,"100",-1),q=a("option",{value:"1000"},"All",-1),G=[R,M,$,E,O,N,q],z=["onClick"];function j(s,e,t,g,i,r){const y=u("DropDown"),m=u("Table"),w=u("Pagination");return c(),h("div",null,[n(m,{title:"Questions",headers:i.headers},{length:p(()=>[U(a("select",{class:"form-control length","onUpdate:modelValue":e[0]||(e[0]=l=>i.tableData.length=l),onChange:e[1]||(e[1]=l=>r.getHistory())},G,544),[[x,i.tableData.length]])]),default:p(()=>[(c(!0),h(b,null,k(i.questions,l=>(c(),h("tr",{key:l.id},[a("td",null,_(l.title),1),a("td",null,_(l.duration),1),(c(!0),h(b,null,k(l.options,f=>(c(),h("td",{key:f.id},_(f.title),1))),128)),a("td",null,_(l.answer?l.answer.title:""),1),a("td",null,[n(y,null,{default:p(()=>[a("a",{class:"dropdown-item",href:"",onClick:W(f=>r.remove(l),["prevent"])},"Remove",8,z)]),_:2},1024)])]))),128))]),_:1},8,["headers"]),n(w,{links:i.links.links,from:i.links.from,to:i.links.to,total:i.links.total,onPageClicked:r.getHistory},null,8,["links","from","to","total","onPageClicked"])])}const J=A(H,[["render",j]]),K={components:{WalletCard:C,WalletContainer:D,Modal:B,TextField:I,Button:P,Table:V,Pagination:T,SingleSelect:L,TextAreaField:F,DropDown:v,QuestionTable:J},created(){this.getCategories()},data(){return{form:{title:"",description:"",category_id:"",number_of_questions:""},questions:[{title:"",duration:"",answer:"",a:"",b:"",c:"",d:""}],title:"",wallet:{},category:"",openFund:!1,amount:"",errors:{amount:""},categories:[],quizes:[],openWallet:!1,walletsErrors:{title:""}}},methods:{remove(){confirm("Are you sure you want to delete all questions from this category?")&&(this.showLoader(),this.makeRequest("POST",`${this.endpoints.deleteQuestions}/${this.$route.params.categoryId}`).then(e=>{this.hideLoader(),this.$refs.questionTable.getHistory()}).catch(e=>{}).finally(()=>{this.hideLoader()}))},uploadQueustions(s){let e=s.target.files[0],t=new FormData;t.append("category_id",this.$route.params.categoryId),t.append("question_file",e),this.showLoader(),this.makeRequest("POST",this.endpoints.uploadQuestions,{},t).then(g=>{this.openWallet=!1,this.sweetAlert().success("Questions added successfully"),this.hideLoader(),this.$refs.questionTable.getHistory()}).catch(g=>{this.sweetAlert().error(g.response.data.message)}).finally(()=>{this.hideLoader()})},addQuestion(){this.questions.push({title:"",duration:"",answer:"",a:"",b:"",c:"",d:""})},createWallet(){this.title="",this.openWallet=!0},addWallet(){let s="";if(this.questions.forEach(t=>{(t.title==""||t.answer==""||t.duration==""||t.a==""||t.b==""||t.c==""||t.d=="")&&(s="All fields are required, kindly fill them out"),t.options=[t.a,t.b,t.c,t.d]}),s){this.sweetAlert().error(s);return}this.showLoader();let e={category_id:this.$route.params.categoryId,questions:this.questions};this.makeRequest("POST",this.endpoints.addQuestions,{},e).then(t=>{this.openWallet=!1,this.sweetAlert().success("Questions added successfully"),this.hideLoader(),this.$refs.questionTable.getHistory()}).catch(t=>{this.sweetAlert().error(t.response.data.message)}).finally(()=>{this.hideLoader()})},getCategories(){this.makeRequest("GET",this.endpoints.fetchCategories).then(s=>{this.categories=s.data.data}).catch(s=>{}).finally(()=>{})}},computed:{}};const X={class:"button-container"};function Y(s,e,t,g,i,r){const y=u("page-title"),m=u("Button"),w=u("QuestionTable"),l=u("TextField"),f=u("Modal");return c(),h("div",null,[n(y,null,{default:p(()=>[S("Add Questions for "),a("b",null,_(i.category?i.category.name:""),1)]),_:1}),a("div",X,[n(m,{text:"Add Questions",color:"primary",icon:"mdi mdi-bank",onButtonClicked:e[0]||(e[0]=o=>r.createWallet())}),n(m,{text:"Remove All Questions",color:"danger",icon:"mdi mdi-bank",onButtonClicked:e[1]||(e[1]=o=>r.remove())}),a("input",{id:"myInput",type:"file",onInput:e[2]||(e[2]=(...o)=>r.uploadQueustions&&r.uploadQueustions(...o)),accept:".csv"},null,32)]),a("div",null,[n(w,{categoryId:s.$route.params.categoryId,ref:"questionTable"},null,8,["categoryId"])]),n(f,{id:"addWallet",title:"Add Questions",open:i.openWallet,onClosed:e[3]||(e[3]=o=>i.openWallet=!1)},{buttons:p(()=>[n(m,{icon:"mdi-book",text:"Add Questions",color:"primary",onButtonClicked:r.addWallet},null,8,["onButtonClicked"])]),default:p(()=>[(c(!0),h(b,null,k(i.questions,(o,Q)=>(c(),h("div",{key:Q,class:"question"},[n(l,{modelValue:o.title,"onUpdate:modelValue":d=>o.title=d,label:"Title"},null,8,["modelValue","onUpdate:modelValue"]),n(l,{modelValue:o.duration,"onUpdate:modelValue":d=>o.duration=d,label:"Duration (Seconds)"},null,8,["modelValue","onUpdate:modelValue"]),n(l,{modelValue:o.a,"onUpdate:modelValue":d=>o.a=d,label:"A"},null,8,["modelValue","onUpdate:modelValue"]),n(l,{modelValue:o.b,"onUpdate:modelValue":d=>o.b=d,label:"B"},null,8,["modelValue","onUpdate:modelValue"]),n(l,{modelValue:o.c,"onUpdate:modelValue":d=>o.c=d,label:"C"},null,8,["modelValue","onUpdate:modelValue"]),n(l,{modelValue:o.d,"onUpdate:modelValue":d=>o.d=d,label:"D"},null,8,["modelValue","onUpdate:modelValue"]),n(l,{modelValue:o.answer,"onUpdate:modelValue":d=>o.answer=d,label:"Answer (Option not A or B but the content)"},null,8,["modelValue","onUpdate:modelValue"])]))),128)),n(m,{color:"success",icon:"mid-plus",text:"Add",onButtonClicked:r.addQuestion},null,8,["onButtonClicked"])]),_:1},8,["open"])])}const oe=A(K,[["render",Y]]);export{oe as default};
