import{_ as V,B as A,M as S,j as y,E as M,D as x,S as F,r as d,o as i,c as m,a as o,b as n,w as _,k as P,v as B,F as h,d as f,t as u,e as E,g as b}from"./app-2f14000c.js";import{P as w}from"./Pagination-b51db5c7.js";import{F as R}from"./FileField-f847e92f.js";const T={data(){return{currentPage:1,pageSize:10,gender:[{name:"Male"},{name:"Female"}],form:{first_name:"",last_name:"",email:"",gender:"",role:""},errors:{},registerModalOpen:!1,searchQuery:"",userData:[],lengthData:[5,10,20,30,40,50,100],roles:[],tableData:{search:"",currentPage:1,length:5,links:{},from:"",to:"",total:"",sort:"id",sort_direction:"ASC"}}},mounted(){this.makeRequest("GET",this.endpoints.fetchRoles).then(a=>{this.roles=a.data.data}).catch(a=>{console.log(a.response)}),this.fetchData()},computed:{},methods:{sortBy(a){this.tableData.sort=a,this.tableData.sort_direction=="ASC"?this.tableData.sort_direction="DESC":this.tableData.sort_direction="ASC",this.fetchData()},setPage(a){this.tableData.currentPage=a,this.fetchData()},fetchData(a=this.endpoints.fetchAdmins){this.makeRequest("GET",`${a}?page=${this.tableData.currentPage}`,this.tableData).then(e=>{let s=e.data.data;this.tableData.currentPage=s.current_page,this.tableData.from=s.from,this.tableData.to=s.to,this.tableData.prevPage=s.prev_page_url,this.tableData.nextPage=s.next_page_url,this.tableData.links=s.links,this.tableData.total=s.total,this.userData=s.data}).catch(e=>{console.log(e.response.data)})},showRegisterModal(){this.registerModalOpen=!0},register(){this.errors={};let a=new FormData;for(let e in this.form)a.append(e,this.form[e]);this.showLoader(),this.makeRequest("POST",this.endpoints.addAdmin,{},a).then(e=>{e.data.status==200?(this.sweetAlert().success("Admin Added successfully"),this.registerModalOpen=!1,this.form={first_name:"",last_name:"",email:"",gender:"",role:""}):this.sweetAlert().error(e.data.message),this.fetchData()}).catch(e=>{this.sweetAlert().error("Error Registration"),console.log(e.response.data)}).finally(()=>{this.hideLoader()})},fetchContactDetails(a){}},components:{Button:A,Modal:S,TextField:y,EmailField:M,DateTimeField:x,Pagination:w,FileField:R,SingleSelect:F}},N={class:"button-container"},L=o("h2",null,"LIST OF ALL ADMINS",-1),O={class:"search-items"},U=["value"],I=["value"],q=["onClick"],G={class:"btn btn-info"},j=o("div",{class:"line"},null,-1),z={class:"pt-3"};function Q(a,e,s,H,t,r){const g=d("Button"),v=d("Pagination"),c=d("TextField"),k=d("EmailField"),p=d("SingleSelect"),C=d("Modal");return i(),m("div",null,[o("div",N,[n(g,{text:"ADD ADMIN",color:"primary",icon:"mdi mdi-plus-circle",onButtonClicked:e[0]||(e[0]=l=>r.showRegisterModal())})]),L,o("div",O,[_(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>t.tableData.search=l),placeholder:"Search members",class:"search",onInput:e[2]||(e[2]=l=>r.fetchData())},null,544),[[P,t.tableData.search]]),_(o("select",{class:"form-control length-select","onUpdate:modelValue":e[3]||(e[3]=l=>t.tableData.length=l),onChange:e[4]||(e[4]=l=>r.fetchData())},[(i(!0),m(h,null,f(t.lengthData,l=>(i(),m("option",{value:l,key:l},u(l),9,U))),128)),t.tableData.total?(i(),m("option",{key:0,value:t.tableData.total},"All",8,I)):E("",!0)],544),[[B,t.tableData.length]])]),o("table",null,[o("thead",null,[o("tr",null,[o("th",{onClick:e[5]||(e[5]=l=>r.sortBy("first_name"))},"Name"),o("th",{onClick:e[6]||(e[6]=l=>r.sortBy("email"))},"Email"),o("th",{onClick:e[7]||(e[7]=l=>r.sortBy("address"))},"Roles")])]),o("tbody",null,[(i(!0),m(h,null,f(t.userData,l=>(i(),m("tr",{key:l.id,onClick:D=>r.fetchContactDetails(l.id),class:"detail-click"},[o("td",null,u(l.name),1),o("td",null,u(l.email),1),o("td",null,[(i(!0),m(h,null,f(l.roles,D=>(i(),m("div",G,u(D.name),1))),256))])],8,q))),128))])]),n(v,{from:t.tableData.from,to:t.tableData.to,links:t.tableData.links,total:t.tableData.total,onPageClicked:r.setPage},null,8,["from","to","links","total","onPageClicked"]),n(C,{id:"registerModal",title:"Add Admin",open:t.registerModalOpen,onClosed:e[14]||(e[14]=l=>t.registerModalOpen=!1),large:!1},{buttons:b(()=>[n(g,{icon:"mdi-send",text:"Register",color:"primary",onButtonClicked:e[13]||(e[13]=l=>r.register())})]),default:b(()=>[o("div",null,[j,o("form",z,[n(c,{label:"First Name",modelValue:t.form.first_name,"onUpdate:modelValue":e[8]||(e[8]=l=>t.form.first_name=l),error:t.errors.first_name?t.errors.first_name[0]:""},null,8,["modelValue","error"]),n(c,{label:"Last Name",modelValue:t.form.last_name,"onUpdate:modelValue":e[9]||(e[9]=l=>t.form.last_name=l),error:t.errors.last_name?t.errors.last_name[0]:""},null,8,["modelValue","error"]),n(k,{label:"Email",modelValue:t.form.email,"onUpdate:modelValue":e[10]||(e[10]=l=>t.form.email=l),error:t.errors.email?t.errors.email[0]:""},null,8,["modelValue","error"]),n(p,{options:t.gender,label:"Gender",custom_value:"name",modelValue:t.form.gender,"onUpdate:modelValue":e[11]||(e[11]=l=>t.form.gender=l),text:"name"},null,8,["options","modelValue"]),n(p,{options:t.roles,label:"Role",custom_value:"name",modelValue:t.form.role,"onUpdate:modelValue":e[12]||(e[12]=l=>t.form.role=l),text:"name"},null,8,["options","modelValue"])])])]),_:1},8,["open"])])}const X=V(T,[["render",Q]]);export{X as default};
