import{_ as M,B as F,M as y,i as B,E as P,D as S,S as w,r as i,o as m,c as d,a as l,b as o,w as g,j as x,v as E,F as h,d as D,t as u,e as U,g as _}from"./app-53bd4f0c.js";import{P as A}from"./Pagination-733891e9.js";import{F as R}from"./FileField-db8e0caa.js";const T={data(){return{currentPage:1,pageSize:10,gender:[{name:"Male"},{name:"Female"}],form:{first_name:"",last_name:"",email:"",address:"",dob:"",phone_number:"",wedding_date:"",picture:"",gender:""},errors:{},registerModalOpen:!1,searchQuery:"",userData:[],lengthData:[5,10,20,30,40,50,100],tableData:{search:"",currentPage:1,length:5,links:{},from:"",to:"",total:"",sort:"id",sort_direction:"ASC"}}},mounted(){this.fetchData()},computed:{},methods:{sortBy(s){this.tableData.sort=s,this.tableData.sort_direction=="ASC"?this.tableData.sort_direction="DESC":this.tableData.sort_direction="ASC",this.fetchData()},setPage(s){this.tableData.currentPage=s,this.fetchData()},fetchData(s=this.endpoints.fetchUsers){this.makeRequest("GET",`${s}?page=${this.tableData.currentPage}`,this.tableData).then(e=>{let a=e.data.data;this.tableData.currentPage=a.current_page,this.tableData.from=a.from,this.tableData.to=a.to,this.tableData.prevPage=a.prev_page_url,this.tableData.nextPage=a.next_page_url,this.tableData.links=a.links,this.tableData.total=a.total,this.userData=a.data}).catch(e=>{console.log(e.response.data)})},showRegisterModal(){this.registerModalOpen=!0},register(){this.errors={};let s=new FormData;for(let e in this.form)s.append(e,this.form[e]);this.showLoader(),this.makeRequest("POST",this.endpoints.createUser,{},s).then(e=>{this.sweetAlert().success("Member Added successfully"),this.registerModalOpen=!1,this.form={first_name:"",last_name:"",email:"",address:"",dob:"",phone_number:"",wedding_date:""},this.fetchData()}).catch(e=>{this.sweetAlert().error("Error Registration"),console.log(e.response.data)}).finally(()=>{this.hideLoader()})},fetchContactDetails(s){this.$router.push({path:`members/${s}`})}},components:{Button:F,Modal:y,TextField:B,EmailField:P,DateTimeField:S,Pagination:A,FileField:R,SingleSelect:w}},N={class:"button-container"},O=l("h2",null,"LIST OF ALL CHURCH MEMBER",-1),L={class:"search-items"},H=["value"],q=["value"],G=["onClick"],I=l("div",{class:"line"},null,-1),j={class:"pt-3"};function z(s,e,a,Q,t,n){const f=i("Button"),V=i("Pagination"),p=i("TextField"),v=i("EmailField"),c=i("SingleSelect"),b=i("DateTimeField"),k=i("FileField"),C=i("Modal");return m(),d("div",null,[l("div",N,[o(f,{text:"ADD MEMBER",color:"primary",icon:"mdi mdi-plus-circle",onButtonClicked:e[0]||(e[0]=r=>n.showRegisterModal())})]),O,l("div",L,[g(l("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=r=>t.tableData.search=r),placeholder:"Search members",class:"search",onInput:e[2]||(e[2]=r=>n.fetchData())},null,544),[[x,t.tableData.search]]),g(l("select",{class:"form-control length-select","onUpdate:modelValue":e[3]||(e[3]=r=>t.tableData.length=r),onChange:e[4]||(e[4]=r=>n.fetchData())},[(m(!0),d(h,null,D(t.lengthData,r=>(m(),d("option",{value:r,key:r},u(r),9,H))),128)),t.tableData.total?(m(),d("option",{key:0,value:t.tableData.total},"All",8,q)):U("",!0)],544),[[E,t.tableData.length]])]),l("table",null,[l("thead",null,[l("tr",null,[l("th",{onClick:e[5]||(e[5]=r=>n.sortBy("first_name"))},"Name"),l("th",{onClick:e[6]||(e[6]=r=>n.sortBy("phone_number"))},"Phone Number"),l("th",{onClick:e[7]||(e[7]=r=>n.sortBy("email"))},"Email"),l("th",{onClick:e[8]||(e[8]=r=>n.sortBy("address"))},"Address"),l("th",{onClick:e[9]||(e[9]=r=>n.sortBy("dob"))},"Date of Birth")])]),l("tbody",null,[(m(!0),d(h,null,D(t.userData,r=>(m(),d("tr",{key:r.id,onClick:W=>n.fetchContactDetails(r.id),class:"detail-click"},[l("td",null,u(r.name),1),l("td",null,u(r.phone_number),1),l("td",null,u(r.email),1),l("td",null,u(r.address),1),l("td",null,u(s.formatDate(r.dob,!0)),1)],8,G))),128))])]),o(V,{from:t.tableData.from,to:t.tableData.to,links:t.tableData.links,total:t.tableData.total,onPageClicked:n.setPage},null,8,["from","to","links","total","onPageClicked"]),o(C,{id:"registerModal",title:"Register Church Member",open:t.registerModalOpen,onClosed:e[20]||(e[20]=r=>t.registerModalOpen=!1),large:!1},{buttons:_(()=>[o(f,{icon:"mdi-send",text:"Register",color:"primary",onButtonClicked:e[19]||(e[19]=r=>n.register())})]),default:_(()=>[l("div",null,[I,l("form",j,[o(p,{label:"First Name",modelValue:t.form.first_name,"onUpdate:modelValue":e[10]||(e[10]=r=>t.form.first_name=r),error:t.errors.first_name?t.errors.first_name[0]:""},null,8,["modelValue","error"]),o(p,{label:"Last Name",modelValue:t.form.last_name,"onUpdate:modelValue":e[11]||(e[11]=r=>t.form.last_name=r),error:t.errors.last_name?t.errors.last_name[0]:""},null,8,["modelValue","error"]),o(p,{label:"Phone Number",modelValue:t.form.phone_number,"onUpdate:modelValue":e[12]||(e[12]=r=>t.form.phone_number=r),error:t.errors.phone_number?t.errors.phone_number[0]:""},null,8,["modelValue","error"]),o(p,{label:"Home Address",modelValue:t.form.address,"onUpdate:modelValue":e[13]||(e[13]=r=>t.form.address=r),error:t.errors.address?t.errors.address[0]:""},null,8,["modelValue","error"]),o(v,{label:"Email",modelValue:t.form.email,"onUpdate:modelValue":e[14]||(e[14]=r=>t.form.email=r),error:t.errors.email?t.errors.email[0]:""},null,8,["modelValue","error"]),o(c,{options:t.gender,label:"Gender",custom_value:"name",modelValue:t.form.gender,"onUpdate:modelValue":e[15]||(e[15]=r=>t.form.gender=r),text:"name"},null,8,["options","modelValue"]),o(b,{label:"DOB",modelValue:t.form.dob,"onUpdate:modelValue":e[16]||(e[16]=r=>t.form.dob=r),error:t.errors.dob?t.errors.dob[0]:""},null,8,["modelValue","error"]),o(b,{label:"Wedding Date",modelValue:t.form.wedding_date,"onUpdate:modelValue":e[17]||(e[17]=r=>t.form.wedding_date=r),error:t.errors.wedding_date?t.errors.wedding_date[0]:""},null,8,["modelValue","error"]),o(k,{modelValue:t.form.picture,"onUpdate:modelValue":e[18]||(e[18]=r=>t.form.picture=r),error:t.errors.picture?t.errors.picture[0]:""},null,8,["modelValue","error"])])])]),_:1},8,["open"])])}const Y=M(T,[["render",z]]);export{Y as default};
